class Store{constructor(e="keyval-store",i="keyval"){this.storeName=i,this._dbp=new Promise((r,a)=>{const o=indexedDB.open(e,1);o.onerror=()=>a(o.error),o.onsuccess=()=>r(o.result),o.onupgradeneeded=()=>{o.result.createObjectStore(i)}})}_withIDBStore(e,i){return this._dbp.then(r=>new Promise((a,o)=>{const n=r.transaction(this.storeName,e);n.oncomplete=()=>a(),n.onabort=n.onerror=()=>o(n.error),i(n.objectStore(this.storeName))}))}}let store;function getDefaultStore(){return store||(store=new Store),store}function get(e,i=getDefaultStore()){let r;return i._withIDBStore("readonly",i=>{r=i.get(e)}).then(()=>r.result)}function set(e,i,r=getDefaultStore()){return r._withIDBStore("readwrite",r=>{r.put(i,e)})}var manifest=[{url:"images/authors/llighter.jpg",revision:"0d89acff3b49ad6682767bb5963216f3"},{url:"images/desert.jpg",revision:"74e81f00e5ebd0196a96a5eba524e0c6"},{url:"images/favicon@2x.png",revision:"74d9ed308bd4befd1d3c893212fef201"},{url:"images/future_web.svg",revision:"e6af2eefb8caae9b4b19dbff22069a9d"},{url:"images/icon-128x128.png",revision:"d47070eb2769c7723a84a73c21581c8f"},{url:"images/icon-144x144.png",revision:"bcb72dedb2814db9ca116d1769f99c56"},{url:"images/icon-152x152.png",revision:"74c0b869e8dfeb1f5672f098eb0f1de0"},{url:"images/icon-192x192.png",revision:"fd19a8032447589b195df80295912bc7"},{url:"images/icon-384x384.png",revision:"daba796dac7f5ecd5bf01a19633e5767"},{url:"images/icon-512x512.png",revision:"aa535aac4e30a8cdbc45ebd3dfe277cf"},{url:"images/icon-72x72.png",revision:"243d4f9e621c58049a626bf7b3fb4fc3"},{url:"images/icon-96x96.png",revision:"7f1713d79164be3b9727b5800d21a256"},{url:"images/logo.png",revision:"075e0ac4d8dc22079bd2de5c1dfc43c1"},{url:"images/logo.svg",revision:"68a73f4dac8638fec407dd652f188b52"},{url:"images/social.png",revision:"b0ad88011019cd634a114340eb594c7f"},{url:"images/touchicon-180.png",revision:"38921cec30aebee98a8c5491d68394f4"},{url:"app.css",revision:"ea0a7020bbb8abbed78f0833035adf74"},{url:"index.html",revision:"015e16b147d5c028c3e0ce59542615b3"},{url:"offline/index.html",revision:"74d2e466e1dfb3d607421f87192bc3db"},{url:"images/authors/llighter.jpg",revision:"0d89acff3b49ad6682767bb5963216f3"},{url:"images/desert.jpg",revision:"74e81f00e5ebd0196a96a5eba524e0c6"},{url:"images/favicon@2x.png",revision:"74d9ed308bd4befd1d3c893212fef201"},{url:"images/future_web.svg",revision:"e6af2eefb8caae9b4b19dbff22069a9d"},{url:"images/icon-128x128.png",revision:"d47070eb2769c7723a84a73c21581c8f"},{url:"images/icon-144x144.png",revision:"bcb72dedb2814db9ca116d1769f99c56"},{url:"images/icon-152x152.png",revision:"74c0b869e8dfeb1f5672f098eb0f1de0"},{url:"images/icon-192x192.png",revision:"fd19a8032447589b195df80295912bc7"},{url:"images/icon-384x384.png",revision:"daba796dac7f5ecd5bf01a19633e5767"},{url:"images/icon-512x512.png",revision:"aa535aac4e30a8cdbc45ebd3dfe277cf"},{url:"images/icon-72x72.png",revision:"243d4f9e621c58049a626bf7b3fb4fc3"},{url:"images/icon-96x96.png",revision:"7f1713d79164be3b9727b5800d21a256"},{url:"images/logo.png",revision:"075e0ac4d8dc22079bd2de5c1dfc43c1"},{url:"images/logo.svg",revision:"68a73f4dac8638fec407dd652f188b52"},{url:"images/social.png",revision:"b0ad88011019cd634a114340eb594c7f"},{url:"images/touchicon-180.png",revision:"38921cec30aebee98a8c5491d68394f4"}];const serviceWorkerArchitecture="v2",normalizeIndexCacheKeyPlugin={cacheKeyWillBeUsed:({request:e,mode:i})=>e.url.endsWith("/")?e.url+"index.html":e};importScripts("https://storage.googleapis.com/workbox-cdn/releases/4.3.1/workbox-sw.js");let replacingPreviousServiceWorker=!1;self.addEventListener("install",e=>{self.registration.active&&(replacingPreviousServiceWorker=!0),e.waitUntil(self.skipWaiting())}),self.addEventListener("activate",e=>{const i=Promise.resolve().then(async()=>{const e=await get("arch");if(void 0===e&&replacingPreviousServiceWorker);else if(!replacingPreviousServiceWorker||"v2"===e)return;console.debug("web.dev SW upgrade from",e,"to arch","v2"),await self.clients.claim(),(await self.clients.matchAll({includeUncontrolled:!0,type:"window"})).map(e=>e.navigate(e.url)),await set("arch","v2")});e.waitUntil(i)}),workbox.googleAnalytics.initialize(),workbox.routing.registerRoute(/^https:\/\/fonts\.googleapis\.com/,new workbox.strategies.StaleWhileRevalidate({cacheName:"google-fonts-stylesheets"})),workbox.routing.registerRoute(/^https:\/\/fonts\.gstatic\.com/,new workbox.strategies.CacheFirst({cacheName:"google-fonts-webfonts",plugins:[new workbox.cacheableResponse.Plugin({statuses:[0,200]}),new workbox.expiration.Plugin({maxAgeSeconds:31536e3,maxEntries:30})]})),workbox.precaching.precacheAndRoute(manifest);const contentPageRe=new RegExp("/([\\w-]+/)*(|index.html)$"),untrailedContentPageRe=new RegExp("^(/[\\w-]+)+$");workbox.routing.registerRoute(contentPageRe,new workbox.strategies.StaleWhileRevalidate({plugins:[normalizeIndexCacheKeyPlugin]})),workbox.routing.registerRoute(new RegExp("/images/.*"),new workbox.strategies.StaleWhileRevalidate),self.addEventListener("fetch",e=>{const i=new URL(e.request.url);if(!untrailedContentPageRe.exec(i.pathname)||self.location.host!==i.host)return;const r=Promise.resolve().then(async()=>{const r=workbox.precaching.getCacheKeyForURL(i.pathname+"/index.html");if(!await caches.match(r))try{return await fetch(e.request)}catch(e){}const a=new Headers;return a.append("Location",e.request.url+"/"),new Response("",{status:301,headers:a})});e.respondWith(r)}),workbox.routing.setCatchHandler(async({event:e})=>{if("document"===e.request.destination||e.request.headers.get("X-Document")){const e=workbox.precaching.getCacheKeyForURL("/offline/index.html");return e?caches.match(e):caches.match("/offline/index.html",{ignoreSearch:!0})}});
//# sourceMappingURL=sw.js.map